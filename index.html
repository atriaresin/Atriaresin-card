<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atria Resin | Curated Collection</title>
    <!-- Font -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    
    <style>
        :root { --primary: #681e28; --gold: #c5a059; --dark: #1a1a1a; --light: #f9f9f9; --white: #ffffff; --edit-color: #f39c12; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Helvetica, sans-serif; }
        
        body.rtl { direction: rtl; font-family: 'Vazirmatn', sans-serif !important; }
        body.rtl * { font-family: 'Vazirmatn', sans-serif !important; }
        body { background-color: var(--light); color: var(--dark); padding-bottom: 80px; transition: all 0.3s ease; }

        /* DROPDOWN MENU */
        .lang-dropdown { position: fixed; top: 20px; right: 20px; z-index: 9999; direction: ltr !important; animation: pulse-gold 2s infinite; }
        .lang-dropdown:hover, .lang-dropdown.active { animation: none; }
        .drop-btn { background: rgba(20, 20, 20, 0.95); color: white; padding: 10px 20px; font-size: 1rem; border: 2px solid var(--gold); cursor: pointer; border-radius: 25px; display: flex; align-items: center; gap: 8px; font-weight: bold; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .drop-btn:hover { background: var(--primary); transform: scale(1.05); }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: #fff; min-width: 170px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3); border-radius: 10px; overflow: hidden; margin-top: 5px; text-align: left; z-index: 10000; }
        .dropdown-content.show { display: block; animation: fadeIn 0.2s ease-in-out; }
        .dropdown-content div { color: #333; padding: 12px 16px; text-decoration: none; display: block; cursor: pointer; font-size: 0.95rem; border-bottom: 1px solid #eee; transition: 0.2s; }
        .dropdown-content div:hover { background-color: var(--gold); color: white; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(197, 160, 89, 0); } 100% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0); } }

        /* HEADER */
        header { background: linear-gradient(135deg, #2c050b, var(--primary)); color: white; padding: 50px 20px 100px; text-align: center; border-radius: 0 0 50% 50% / 20px; position: relative; }
        .logo-box { width: 100px; height: 100px; margin: 0 auto 15px; background: var(--dark); border: 3px solid var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 25px rgba(197, 160, 89, 0.6); }
        .logo-text { font-family: 'Georgia', serif; font-size: 2.5rem; font-weight: bold; color: var(--gold); }
        header h1 { font-size: 1.8rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; }
        header p { font-size: 0.9rem; opacity: 0.8; font-style: italic; }

        /* PROFILE */
        .profile-section { background: var(--white); width: 90%; max-width: 500px; margin: -70px auto 40px; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; position: relative; z-index: 10; border-top: 5px solid var(--gold); }
        .bio-text { color: #555; margin-bottom: 20px; line-height: 1.8; }
        body.rtl .bio-text { text-align: justify; }
        .social-links { display: flex; justify-content: center; gap: 10px; }
        .btn { text-decoration: none; padding: 10px 20px; border-radius: 30px; font-size: 0.9rem; font-weight: bold; transition: 0.3s; border: none; cursor: pointer; }
        .btn-insta { background: #E1306C; color: white; }
        .btn-primary { background: var(--primary); color: white; }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }

        /* GALLERY */
        .section-title { text-align: center; color: var(--primary); margin: 30px 0; font-size: 1.6rem; text-transform: uppercase; letter-spacing: 1px; }
        .gallery-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 0 20px; max-width: 1200px; margin: 0 auto; }
        .gallery-card { background: white; width: 280px; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); transition: transform 0.3s; display: flex; flex-direction: column; }
        .gallery-card:hover { transform: translateY(-5px); }
        .gallery-img { width: 100%; height: 280px; object-fit: cover; border-bottom: 2px solid var(--gold); background-color: #eee; }
        .gallery-info { padding: 15px; text-align: center; }
        .art-title { color: var(--primary); font-weight: bold; font-size: 1.1rem; margin-bottom: 5px; }
        .art-price { color: #444; font-weight: bold; font-size: 0.95rem; }
        .art-date { color: #999; font-size: 0.8rem; margin-top: 5px;}

        /* FORM */
        .order-form-container { background: white; max-width: 600px; margin: 50px auto 20px; padding: 30px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: #444; font-weight: 600; }
        .form-group input, .form-group textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; }
        .btn-submit { width: 100%; background: var(--gold); color: var(--dark); }

        /* ADMIN */
        .admin-btn { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--dark); color: var(--gold); border-radius: 50%; font-size: 1.8rem; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 1000; border: 2px solid var(--gold); }
        body.rtl .admin-btn { right: auto; left: 20px; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .modal-box { background: white; width: 90%; max-width: 500px; border-radius: 10px; padding: 25px; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;}
        .close-modal { font-size: 1.5rem; cursor: pointer; background: none; border: none;}
        body.rtl .close-modal { float: left; }

        .tabs { display: flex; margin-bottom: 20px; gap: 10px; }
        .tab-btn { flex: 1; padding: 10px; background: #eee; border: none; border-radius: 5px; cursor: pointer; }
        .tab-btn.active { background: var(--primary); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .admin-list-item { display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f9f9f9; margin-bottom: 5px; border-radius: 5px; }
        .action-buttons { display: flex; gap: 5px; }
        .del-btn { background: #d32f2f; color: white; padding: 5px 10px; border-radius: 4px; border:none; cursor: pointer;}
        .edit-btn { background: var(--edit-color); color: white; padding: 5px 10px; border-radius: 4px; border:none; cursor: pointer;}
        #loading-indicator { display: none; text-align: center; color: var(--gold); font-weight: bold; margin-top: 10px; }
        #edit-mode-badge { display: none; background: var(--edit-color); color: white; padding: 5px; border-radius: 4px; font-size: 0.8rem; text-align: center; margin-bottom: 10px; }
        #cancel-edit-btn { display: none; width: 100%; background: #777; color: white; margin-top: 10px; }
    </style>
</head>
<body class="ltr">

    <!-- LANGUAGE DROPDOWN -->
    <div class="lang-dropdown">
        <button class="drop-btn" id="current-lang-display" onclick="toggleLangMenu()">üåê üá∫üá∏ English ‚ñº</button>
        <div id="myDropdown" class="dropdown-content">
            <div onclick="setLanguage('en')">üá∫üá∏ English</div>
            <div onclick="setLanguage('fa')">üáÆüá∑ ŸÅÿßÿ±ÿ≥€å</div>
            <div onclick="setLanguage('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
            <div onclick="setLanguage('zh')">üá®üá≥ ‰∏≠Êñá</div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo-box"><span class="logo-text">AR</span></div>
        <h1 id="txt-brand">Atria Resin</h1>
        <p id="txt-tagline">Timeless Beauty, Captured in Resin</p>
    </header>

    <!-- Profile -->
    <div class="profile-section">
        <h2 style="color: var(--primary); margin-bottom: 10px;" id="txt-artist">Jinoura Mehri</h2>
        <p class="bio-text" id="txt-bio">I specialize in preserving moments and emotions through fluid art. Each piece at Atria Resin is meticulously handcrafted to bring a touch of glass-like elegance and natural beauty into your living space.</p>
        <div class="social-links">
            <a href="https://instagram.com/atria_resin" target="_blank" class="btn btn-insta" id="btn-insta">View Portfolio</a>
            <a href="#custom-order" class="btn btn-primary" id="btn-custom">Start Custom Order</a>
        </div>
    </div>

    <!-- Gallery -->
    <h2 class="section-title" id="txt-gallery-title">Curated Collection</h2>
    <div class="gallery-container" id="gallery-display"></div>

    <!-- Order Form -->
    <h2 class="section-title" id="custom-order">Commission a Unique Piece</h2>
    <div class="order-form-container">
        <form action="mailto:atriaresin@gmail.com" method="post" enctype="text/plain">
            <div class="form-group"><label id="lbl-name">Your Name</label><input type="text" name="Name" required placeholder="e.g. Alex" id="ph-name"></div>
            <div class="form-group"><label id="lbl-contact">Contact (Email/Phone)</label><input type="text" name="Contact" required placeholder="How can I reach you?" id="ph-contact"></div>
            <div class="form-group"><label id="lbl-details">Tell me about your vision...</label><textarea name="Message" rows="5" required placeholder="Describe the colors, size, or style you are looking for..." id="ph-msg"></textarea></div>
            <button type="submit" class="btn btn-submit" id="btn-send">Send Commission Request</button>
        </form>
    </div>

    <!-- Admin Button -->
    <div class="admin-btn" onclick="openAdminPanel()">‚öôÔ∏è</div>

    <!-- Admin Modal -->
    <div class="modal-overlay" id="admin-modal">
        <div class="modal-box">
            <div class="modal-header"><h3 id="txt-admin-title">Artist Dashboard</h3><button class="close-modal" onclick="closeAdminPanel()">&times;</button></div>
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('add')" id="tab-add-txt">New Art</button>
                <button class="tab-btn" onclick="showTab('manage')" id="tab-manage-txt">Inventory</button>
                <button class="tab-btn" onclick="showTab('settings')" id="tab-settings-txt">Settings</button>
            </div>
            <!-- ADD TAB -->
            <div id="tab-add" class="tab-content active">
                <div id="edit-mode-badge">EDIT MODE</div><input type="hidden" id="edit-id"> 
                <div class="form-group"><label id="lbl-item-title">Artwork Title</label><input type="text" id="new-title"></div>
                <div class="form-group"><label id="lbl-item-price">Price (Digits Only)</label><input type="number" id="new-price"></div>
                <!-- Currency Note for Admin -->
                <p id="currency-note" style="font-size:0.85rem; color:#666; margin-bottom:15px; font-style:italic;">
                    * For Global (En/Ru/Zh), enter price in USD ($).<br>
                    * For Persian, enter price in Toman.
                </p>
                <div class="form-group"><label id="lbl-item-img">Upload Photo</label><input type="file" id="new-image" accept="image/*"></div>
                <div id="loading-indicator">Processing...</div>
                <button class="btn btn-primary" style="width:100%" id="save-btn" onclick="saveFormData()">+ Publish to Gallery</button>
                <button class="btn" id="cancel-edit-btn" onclick="resetForm()">Cancel</button>
            </div>
            <!-- MANAGE TAB -->
            <div id="tab-manage" class="tab-content"><div id="manage-list"></div></div>
            <!-- SETTINGS TAB -->
            <div id="tab-settings" class="tab-content">
                <div class="form-group"><label>Change Password</label><input type="password" id="new-pass-input"></div>
                <button class="btn btn-primary" onclick="updatePassword()">Save</button>
            </div>
        </div>
    </div>

    <script>
        // --- EXCHANGE RATES SETTINGS ---
        // Base currency is USD ($).
        const EXCHANGE_RATES = {
            en: 1,      // Base
            ru: 77.5,   // 1 USD = 77.5 RUB
            zh: 7.08,   // 1 USD = 7.08 CNY
            fa: 1       // Independent DB
        };

        // CONFIG
        let currentLang = 'en';
        
        // --- UPDATED ELEGANT CONTENT ---
        const translations = {
            en: { 
                flag: 'üá∫üá∏', label: 'English', dir: 'ltr', currency: '$', suffix: '', date: 'en-US', 
                brand: "Atria Resin", tagline: "Timeless Beauty, Captured in Resin", artist: "Jinoura Mehri", 
                bio: "I specialize in preserving moments and emotions through fluid art. Each piece at Atria Resin is meticulously handcrafted to bring a touch of glass-like elegance and natural beauty into your living space.", 
                insta: "View Portfolio", custom: "Start Custom Order", galleryTitle: "Curated Collection", reqTitle: "Commission a Unique Piece", 
                lblName: "Your Name", lblContact: "Contact (Email/Phone)", lblDetails: "Tell me about your vision...", 
                phName: "e.g. Alex", phContact: "How can I reach you?", phMsg: "Describe the colors, size, or style you are looking for...", 
                btnSend: "Send Commission Request", adminTitle: "Artist Dashboard", tabAdd: "New Art", tabManage: "Inventory", tabSet: "Settings", 
                lblItemTitle: "Artwork Title", lblItemPrice: "Price (Digits)", lblItemImg: "Upload Photo", btnAdd: "+ Publish to Gallery", btnCancel: "Cancel" 
            },
            fa: { 
                flag: 'üáÆüá∑', label: 'ŸÅÿßÿ±ÿ≥€å', dir: 'rtl', currency: '', suffix: ' ÿ™ŸàŸÖÿßŸÜ', date: 'fa-IR', 
                brand: "ÿ¢ÿ™ÿ±€åÿß ÿ±ÿ≤€åŸÜ", tagline: "ÿ≤€åÿ®ÿß€å€å ŸÖÿßŸÜÿØ⁄Øÿßÿ±ÿå ÿ´ÿ®ÿ™ ÿ¥ÿØŸá ÿØÿ± ÿ±ÿ≤€åŸÜ", artist: "⁄ò€åŸÜŸàÿ±ÿß ŸÖŸáÿ±€å", 
                bio: "ÿ™ÿÆÿµÿµ ŸÖŸÜ ÿ´ÿ®ÿ™ ŸÑÿ≠ÿ∏ÿßÿ™ Ÿà ÿßÿ≠ÿ≥ÿßÿ≥ÿßÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ ŸáŸÜÿ± ÿ≥€åÿßŸÑ ÿßÿ≥ÿ™. Ÿáÿ± ÿßÿ´ÿ± ÿØÿ± ÿ¢ÿ™ÿ±€åÿß ÿ±ÿ≤€åŸÜ ÿ®ÿß ÿ∏ÿ±ÿßŸÅÿ™ Ÿà ÿØŸÇÿ™ ÿØÿ≥ÿ™‚Äåÿ≥ÿßÿ≤ ÿ¥ÿØŸá ÿ™ÿß ÿ¨ŸÑŸàŸá‚Äåÿß€å ÿ¥€åÿ¥Ÿá‚Äåÿß€å Ÿà ÿ≤€åÿ®ÿß€å€å ÿ∑ÿ®€åÿπ€å ÿ±ÿß ÿ®Ÿá ŸÅÿ∂ÿß€å ÿ≤ŸÜÿØ⁄Ø€å ÿ¥ŸÖÿß ŸáÿØ€åŸá ÿØŸáÿØ.", 
                insta: "ŸÖÿ¥ÿßŸáÿØŸá ŸÜŸÖŸàŸÜŸá‚Äå⁄©ÿßÿ±Ÿáÿß", custom: "ÿ≥ŸÅÿßÿ±ÿ¥ ÿßÿÆÿ™ÿµÿßÿµ€å", galleryTitle: "ŸÖÿ¨ŸÖŸàÿπŸá ÿ¢ÿ´ÿßÿ±", reqTitle: "ÿ≥ŸÅÿßÿ±ÿ¥ ÿ∑ÿ±ÿ≠ ÿØŸÑÿÆŸàÿßŸá", 
                lblName: "ŸÜÿßŸÖ ÿ¥ŸÖÿß", lblContact: "ÿ±ÿßŸá ÿßÿ±ÿ™ÿ®ÿßÿ∑€å (ŸÖŸàÿ®ÿß€åŸÑ/ÿß€åŸÖ€åŸÑ)", lblDetails: "ÿØÿ±ÿ®ÿßÿ±Ÿá ÿß€åÿØŸá ÿÆŸàÿØ ÿ®⁄ØŸà€å€åÿØ...", 
                phName: "ŸÖÿ´ŸÑÿß: ÿπŸÑ€å", phContact: "⁄Üÿ∑Ÿàÿ± ÿ®ÿß ÿ¥ŸÖÿß ÿ™ŸÖÿßÿ≥ ÿ®⁄Ø€åÿ±ŸÖÿü", phMsg: "ŸÑÿ∑ŸÅÿß ÿ±ŸÜ⁄Ø‚ÄåŸáÿßÿå ÿßÿ®ÿπÿßÿØ Ÿà ÿ≥ÿ®⁄©€å ⁄©Ÿá ÿØÿ± ŸÜÿ∏ÿ± ÿØÿßÿ±€åÿØ ÿ±ÿß ÿ™Ÿàÿµ€åŸÅ ⁄©ŸÜ€åÿØ...", 
                btnSend: "ÿßÿ±ÿ≥ÿßŸÑ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ≥ŸÅÿßÿ±ÿ¥", adminTitle: "ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ ŸáŸÜÿ±ŸÖŸÜÿØ", tabAdd: "ÿßÿ´ÿ± ÿ¨ÿØ€åÿØ", tabManage: "ŸÖŸàÿ¨ŸàÿØ€å", tabSet: "ÿ™ŸÜÿ∏€åŸÖÿßÿ™", 
                lblItemTitle: "ÿπŸÜŸàÿßŸÜ ÿßÿ´ÿ±", lblItemPrice: "ŸÇ€åŸÖÿ™ (ÿ™ŸàŸÖÿßŸÜ)", lblItemImg: "ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™ÿµŸà€åÿ±", btnAdd: "+ ÿßŸÜÿ™ÿ¥ÿßÿ± ÿØÿ± ⁄ØÿßŸÑÿ±€å", btnCancel: "ŸÑÿ∫Ÿà" 
            },
            ru: { 
                flag: 'üá∑üá∫', label: '–†—É—Å—Å–∫–∏–π', dir: 'ltr', currency: '‚ÇΩ', suffix: '', date: 'ru-RU', 
                brand: "Atria Resin", tagline: "–í–µ—á–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞, –∑–∞—Å—Ç—ã–≤—à–∞—è –≤ —Å–º–æ–ª–µ", artist: "–î–∂–∏–Ω—É—Ä–∞ –ú–µ—Ö—Ä–∏", 
                bio: "–Ø —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —ç–º–æ—Ü–∏–π —á–µ—Ä–µ–∑ —Ç–µ–∫—É—á–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ. –ö–∞–∂–¥–æ–µ –∏–∑–¥–µ–ª–∏–µ Atria Resin —Å–æ–∑–¥–∞–Ω–æ –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–µ—Å—Ç–∏ –≤ –≤–∞—à –¥–æ–º —Å—Ç–µ–∫–ª—è–Ω–Ω—É—é —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏—Ä–æ–¥–Ω—É—é –∫—Ä–∞—Å–æ—Ç—É.", 
                insta: "–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ", custom: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑", galleryTitle: "–ö–æ–ª–ª–µ–∫—Ü–∏—è", reqTitle: "–ó–∞–∫–∞–∑–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ", 
                lblName: "–í–∞—à–µ –∏–º—è", lblContact: "–ö–æ–Ω—Ç–∞–∫—Ç (Email/–¢–µ–ª)", lblDetails: "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–π –∏–¥–µ–µ...", 
                phName: "–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–Ω–Ω–∞", phContact: "–ö–∞–∫ —Å –≤–∞–º–∏ —Å–≤—è–∑–∞—Ç—å—Å—è?", phMsg: "–û–ø–∏—à–∏—Ç–µ —Ü–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä –∏–ª–∏ —Å—Ç–∏–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—â–µ—Ç–µ...", 
                btnSend: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å", adminTitle: "–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è", tabAdd: "–î–æ–±–∞–≤–∏—Ç—å", tabManage: "–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å", tabSet: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", 
                lblItemTitle: "–ù–∞–∑–≤–∞–Ω–∏–µ", lblItemPrice: "–¶–µ–Ω–∞", lblItemImg: "–§–æ—Ç–æ", btnAdd: "+ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å", btnCancel: "–û—Ç–º–µ–Ω–∞" 
            },
            zh: { 
                flag: 'üá®üá≥', label: '‰∏≠Êñá', dir: 'ltr', currency: '¬•', suffix: '', date: 'zh-CN', 
                brand: "Atria Resin", tagline: "Ê∞∏ÊÅí‰πãÁæéÔºåÂáùÂõ∫‰∫éÊ†ëËÑÇ‰πã‰∏≠", artist: "Jinoura Mehri", 
                bio: "Êàë‰∏ìÊ≥®‰∫éÈÄöËøáÊµÅ‰ΩìËâ∫ÊúØ‰øùÂ≠òÁèçË¥µÁöÑÁû¨Èó¥„ÄÇAtria Resin ÁöÑÊØè‰∏Ä‰ª∂‰ΩúÂìÅÈÉΩÊòØÁ≤æÂøÉÊâãÂ∑•Âà∂‰ΩúÔºåÊó®Âú®‰∏∫ÊÇ®ÁöÑÁîüÊ¥ªÁ©∫Èó¥Â∏¶Êù•Â¶ÇÁéªÁíÉËà¨ÈÄöÈÄèÁöÑ‰ºòÈõÖ‰∏éËá™ÁÑ∂‰πãÁæé„ÄÇ", 
                insta: "Êü•Áúã‰ΩúÂìÅÈõÜ", custom: "ÂÆöÂà∂ËÆ¢Âçï", galleryTitle: "Á≤æÈÄâÁ≥ªÂàó", reqTitle: "ÂÆöÂà∂Áã¨‰∏ÄÊó†‰∫åÁöÑ‰ΩúÂìÅ", 
                lblName: "ÊÇ®ÁöÑÂêçÂ≠ó", lblContact: "ËÅîÁ≥ªÊñπÂºè (ÁîµËØù/ÈÇÆÁÆ±)", lblDetails: "ÂëäËØâÊàë‰πüËÆ∏ÊÇ®ÁöÑÊÉ≥Ê≥ï...", 
                phName: "‰æãÂ¶ÇÔºöÊùéÊòé", phContact: "ÊàëËØ•Â¶Ç‰ΩïËÅîÁ≥ªÊÇ®Ôºü", phMsg: "ËØ∑ÊèèËø∞ÊÇ®ÂØªÊâæÁöÑÈ¢úËâ≤„ÄÅÂ∞∫ÂØ∏ÊàñÈ£éÊ†º...", 
                btnSend: "ÂèëÈÄÅÂÆöÂà∂ËØ∑Ê±Ç", adminTitle: "Ëâ∫ÊúØÂÆ∂‰ª™Ë°®Êùø", tabAdd: "Ê∑ªÂä†Êñ∞‰Ωú", tabManage: "Â∫ìÂ≠òÁÆ°ÁêÜ", tabSet: "ËÆæÁΩÆ", 
                lblItemTitle: "‰ΩúÂìÅÊ†áÈ¢ò", lblItemPrice: "‰ª∑Ê†º", lblItemImg: "‰∏ä‰º†ÂõæÁâá", btnAdd: "+ ÂèëÂ∏ÉÂà∞ÁîªÂªä", btnCancel: "ÂèñÊ∂à" 
            }
        };

        // --- UNLIMITED STORAGE (INDEXED DB) ---
        const DB_NAME = 'AtriaUnlimited_v1';
        const STORE_GLOBAL = 'gallery_global';
        const STORE_FA = 'gallery_fa';
        let db;

        // Init DB
        const request = indexedDB.open(DB_NAME, 1);
        request.onupgradeneeded = (e) => {
            db = e.target.result;
            if(!db.objectStoreNames.contains(STORE_GLOBAL)) db.createObjectStore(STORE_GLOBAL, { keyPath: 'id', autoIncrement: true });
            if(!db.objectStoreNames.contains(STORE_FA)) db.createObjectStore(STORE_FA, { keyPath: 'id', autoIncrement: true });
        };
        request.onsuccess = (e) => {
            db = e.target.result;
            const saved = localStorage.getItem('atria_lang') || 'en';
            setLanguage(saved);
        };
        request.onerror = (e) => alert("Database Error: " + e.target.error);

        function getCurrentStore() { return currentLang === 'fa' ? STORE_FA : STORE_GLOBAL; }

        // --- LOGIC ---
        function toggleLangMenu() { document.getElementById("myDropdown").classList.toggle("show"); }
        window.onclick = function(e) { if(!e.target.matches('.drop-btn')) { var d = document.getElementsByClassName("dropdown-content"); for(var i=0;i<d.length;i++){ if(d[i].classList.contains('show')) d[i].classList.remove('show'); }}};

        function setLanguage(code) {
            currentLang = code;
            localStorage.setItem('atria_lang', code);
            applyUI();
            loadGallery();
        }

        function applyUI() {
            const t = translations[currentLang];
            document.body.className = t.dir;
            document.getElementById('current-lang-display').innerHTML = `üåê ${t.flag} ${t.label} ‚ñº`;
            
            document.getElementById('txt-brand').textContent = t.brand;
            document.getElementById('txt-tagline').textContent = t.tagline;
            document.getElementById('txt-artist').textContent = t.artist;
            document.getElementById('txt-bio').textContent = t.bio;
            document.getElementById('btn-insta').textContent = t.insta;
            document.getElementById('btn-custom').textContent = t.custom;
            document.getElementById('txt-gallery-title').textContent = t.galleryTitle;
            document.getElementById('custom-order').textContent = t.reqTitle;
            document.getElementById('lbl-name').textContent = t.lblName;
            document.getElementById('lbl-contact').textContent = t.lblContact;
            document.getElementById('lbl-details').textContent = t.lblDetails;
            document.getElementById('btn-send').textContent = t.btnSend;
            document.getElementById('txt-admin-title').textContent = t.adminTitle;
            document.getElementById('tab-add-txt').textContent = t.tabAdd;
            document.getElementById('tab-manage-txt').textContent = t.tabManage;
            document.getElementById('tab-settings-txt').textContent = t.tabSet;
            document.getElementById('lbl-item-title').textContent = t.lblItemTitle;
            document.getElementById('lbl-item-price').textContent = t.lblItemPrice;
            document.getElementById('lbl-item-img').textContent = t.lblItemImg;
            document.getElementById('ph-name').placeholder = t.phName;
            document.getElementById('ph-contact').placeholder = t.phContact;
            document.getElementById('ph-msg').placeholder = t.phMsg;

            // Admin Note Logic
            const adminNote = document.getElementById('currency-note');
            if(currentLang === 'fa') {
                adminNote.innerHTML = "* ŸÇ€åŸÖÿ™ ÿ±ÿß ÿ®Ÿá ÿ™ŸàŸÖÿßŸÜ Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ.";
            } else {
                adminNote.innerHTML = "* Enter price in USD ($). It converts automatically for RU/ZH.";
            }

            resetForm();
        }

        function loadGallery() {
            if(!db) return;
            const storeName = getCurrentStore();
            const tx = db.transaction([storeName], 'readonly');
            tx.objectStore(storeName).getAll().onsuccess = (e) => renderGallery(e.target.result);
        }

        function renderGallery(items) {
            const container = document.getElementById('gallery-display');
            container.innerHTML = '';
            const t = translations[currentLang];
            
            if(!items || items.length === 0) {
                container.innerHTML = '<p style="text-align:center;width:100%;color:#999;margin-top:20px;">No items in this gallery.</p>';
                return;
            }
            items.reverse().forEach(item => {
                let displayPrice = "";
                if(item.price) {
                    let finalVal = parseFloat(item.price);
                    
                    // CURRENCY CONVERSION LOGIC
                    if (currentLang !== 'fa') {
                        finalVal = finalVal * EXCHANGE_RATES[currentLang];
                        finalVal = Math.ceil(finalVal);
                    }

                    displayPrice = t.currency + new Intl.NumberFormat(t.date).format(finalVal) + t.suffix;
                }
                
                let date = item.date ? new Intl.DateTimeFormat(t.date).format(new Date(item.date)) : "";
                container.innerHTML += `
                    <div class="gallery-card">
                        <img src="${item.image}" class="gallery-img">
                        <div class="gallery-info">
                            <div class="art-title">${item.title}</div>
                            <div class="art-price">${displayPrice}</div>
                            <div class="art-date">${date}</div>
                        </div>
                    </div>`;
            });
        }

        // --- SAVE WITH COMPRESSION ---
        function saveFormData() {
            const title = document.getElementById('new-title').value;
            const price = document.getElementById('new-price').value;
            const file = document.getElementById('new-image').files[0];
            const editId = document.getElementById('edit-id').value;
            
            if(!title) { alert("Title required"); return; }
            document.getElementById('loading-indicator').style.display = 'block';

            const finish = (imgData) => {
                const storeName = getCurrentStore();
                const tx = db.transaction([storeName], 'readwrite');
                const store = tx.objectStore(storeName);
                
                if(editId) {
                    store.get(parseInt(editId)).onsuccess = (e) => {
                        const data = e.target.result;
                        data.title = title;
                        data.price = price;
                        if(imgData) data.image = imgData;
                        store.put(data);
                    };
                } else {
                    store.add({ title, price, image: imgData, date: Date.now() });
                }

                tx.oncomplete = () => {
                    document.getElementById('loading-indicator').style.display = 'none';
                    alert("Published Successfully!");
                    resetForm();
                    loadGallery();
                    renderManageList();
                };
                tx.onerror = (e) => {
                    alert("Error saving: " + e.target.error);
                    document.getElementById('loading-indicator').style.display = 'none';
                };
            };

            if(file) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = (e) => {
                    const img = new Image();
                    img.src = e.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        const MAX_WIDTH = 1024;
                        const scale = MAX_WIDTH / img.width;
                        canvas.width = MAX_WIDTH;
                        canvas.height = img.height * scale;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        finish(canvas.toDataURL('image/jpeg', 0.7)); 
                    };
                };
            } else if (editId) {
                finish(null);
            } else {
                alert("Image required");
                document.getElementById('loading-indicator').style.display = 'none';
            }
        }

        function deleteItem(id) {
            if(confirm("Delete this artwork?")) {
                const storeName = getCurrentStore();
                const tx = db.transaction([storeName], 'readwrite');
                tx.objectStore(storeName).delete(id).onsuccess = () => { loadGallery(); renderManageList(); };
            }
        }

        function renderManageList() {
            const storeName = getCurrentStore();
            const tx = db.transaction([storeName], 'readonly');
            tx.objectStore(storeName).getAll().onsuccess = (e) => {
                const list = document.getElementById('manage-list');
                list.innerHTML = `<p style="margin-bottom:10px;color:#777">Managing: ${currentLang}</p>`;
                e.target.result.reverse().forEach(item => {
                    list.innerHTML += `
                        <div class="admin-list-item">
                            <div style="display:flex;align-items:center;gap:10px;">
                                <img src="${item.image}" style="width:40px;height:40px;object-fit:cover;border-radius:4px;">
                                <span>${item.title}</span>
                            </div>
                            <div class="action-buttons">
                                <button class="edit-btn" onclick="loadEdit(${item.id})">‚úé</button>
                                <button class="del-btn" onclick="deleteItem(${item.id})">üóë</button>
                            </div>
                        </div>`;
                });
            };
        }

        function loadEdit(id) {
            const storeName = getCurrentStore();
            db.transaction([storeName], 'readonly').objectStore(storeName).get(id).onsuccess = (e) => {
                const i = e.target.result;
                document.getElementById('new-title').value = i.title;
                document.getElementById('new-price').value = i.price;
                document.getElementById('edit-id').value = i.id;
                
                // Get current language translations
                const t = translations[currentLang];
                document.getElementById('save-btn').innerText = "Update Artwork";
                document.getElementById('save-btn').style.backgroundColor = "var(--edit-color)";
                document.getElementById('edit-mode-badge').style.display = "block";
                document.getElementById('cancel-edit-btn').style.display = "block";
                
                // Show the add tab and activate it
                showTab('add');
                
                // Also update the button text in the active tab
                document.getElementById('tab-add-txt').innerText = "Edit Artwork";
            };
        }

        function resetForm() {
            document.getElementById('new-title').value = '';
            document.getElementById('new-price').value = '';
            document.getElementById('new-image').value = '';
            document.getElementById('edit-id').value = '';
            
            // Get current language translations
            const t = translations[currentLang];
            document.getElementById('save-btn').innerText = t.btnAdd;
            document.getElementById('save-btn').style.backgroundColor = "var(--primary)";
            document.getElementById('edit-mode-badge').style.display = "none";
            document.getElementById('cancel-edit-btn').style.display = "none";
            
            // Reset tab button text
            document.getElementById('tab-add-txt').innerText = t.tabAdd;
        }

        function openAdminPanel() {
            const pass = localStorage.getItem('atria_pass') || 'admin123';
            if(prompt("Password:") === pass) { document.getElementById('admin-modal').style.display = 'flex'; renderManageList(); }
        }
        function closeAdminPanel() { document.getElementById('admin-modal').style.display = 'none'; resetForm(); }
        function showTab(n) {
            document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(e => e.classList.remove('active'));
            document.getElementById('tab-'+n).classList.add('active');
            
            // Activate the corresponding button
            if(n === 'add') {
                document.getElementById('tab-add-txt').classList.add('active');
            } else if(n === 'manage') {
                document.getElementById('tab-manage-txt').classList.add('active');
            } else if(n === 'settings') {
                document.getElementById('tab-settings-txt').classList.add('active');
            }
        }
        function updatePassword() { const p = document.getElementById('new-pass-input').value; if(p){ localStorage.setItem('atria_pass',p); alert("Password Saved"); } }
    </script>
</body>
</html>